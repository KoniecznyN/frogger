(()=>{"use strict";const t=function(t,e,i,n,r){this.x=t,this.y=e,this.w=i,this.h=n,this.color=r};var e,i=(e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},e(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),n=function(t){function e(e,i,n,r,o,s,a,h,c){var f=t.call(this,e,i,n,r,o)||this;return f.isAlive=!0,f.direction=s,f.speed=a,f.spritesheet=h,f.carNumber=c,f}return i(e,t),e.prototype.move=function(t){this.destroy(),this.x+=this.direction*this.speed*(t/1e3)},e.prototype.draw=function(t){t.drawImage(this.spritesheet,this.carNumber,100,this.w,this.h,this.x,this.y,this.w,this.h)},e.prototype.destroy=function(){1==this.direction?this.x>=700&&(this.isAlive=!1):this.x<=-this.w&&(this.isAlive=!1)},e}(t);const r=n;var o=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e,i,n,r,o,s,a,h,c){var f=t.call(this,e,i,n,r,o)||this;return f.currentAnimation="flowers_idle",f.animationState="idle",f.idleDuration=1e3+3e3*Math.random(),f.stateTimer=0,f.frameIndex=0,f.frameTimer=0,f.isAnimating=!1,f.isHiding=!1,f.isHidden=!1,f.isAlive=!0,f.direction=s,f.speed=a,f.animations=h,f.spritesheet=c,f.isHiding=Math.floor(101*Math.random())>60,f.isHiding?(f.playAnimation("flowers_idle"),f.animationState="idle"):(f.playAnimation("flowers_idle"),f.isAnimating=!0),f}return o(e,t),e.prototype.move=function(t){this.destroy(),this.x+=this.direction*this.speed*(t/1e3)},e.prototype.draw=function(t){var e=this.animations[this.currentAnimation];if(e)for(var i=e.frames[this.frameIndex],n=this.w/50,r=0;r<n;r++)t.drawImage(this.spritesheet,i.x,i.y,i.w,i.h,this.x+50*r,this.y,50,50)},e.prototype.playAnimation=function(t){var e=this.animations[t];e&&e.frames&&e.times?(this.currentAnimation=t,this.frameIndex=0,this.frameTimer=e.times[0],this.isAnimating=!0):console.warn('Invalid animation "'.concat(t,'"'))},e.prototype.updateAnimation=function(t){var e=this.animations[this.currentAnimation];if(e&&(this.frameTimer-=t,this.frameTimer<=0&&(this.frameIndex++,this.frameIndex>=e.frames.length&&(e.repeat?this.frameIndex=0:(this.frameIndex=e.frames.length-1,this.isAnimating=!1)),this.frameTimer=e.times[this.frameIndex]),this.isHiding))switch(this.stateTimer+=t,this.animationState){case"idle":this.isHidden=!1,this.stateTimer>=this.idleDuration&&(this.playAnimation("flowers_hide"),this.animationState="hide",this.stateTimer=0,this.idleDuration=1e3+3e3*Math.random());break;case"hide":this.isAnimating||(this.playAnimation("flowers_hidden_idle"),this.animationState="hidden_idle",this.stateTimer=0);break;case"hidden_idle":this.isHidden=!0,this.stateTimer>=2e3&&(this.playAnimation("flowers_show"),this.animationState="show",this.stateTimer=0);break;case"show":this.isAnimating||(this.playAnimation("flowers_idle"),this.animationState="idle",this.stateTimer=0)}},e.prototype.destroy=function(){this.x<=-this.w&&(this.isAlive=!1)},e}(t);const a=s;var h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(e,i,n,r,o,s,a,h){var c=t.call(this,e,i,n,r,o)||this;return c.isAlive=!0,c.direction=s,c.speed=a,c.spritesheet=h,c}return h(e,t),e.prototype.move=function(t){this.destroy(),this.x+=this.direction*this.speed*(t/1e3)},e.prototype.draw=function(t){for(var e=this.w/50,i=0;i<e;i++)0==i?t.drawImage(this.spritesheet,0,150,50,50,this.x,this.y,50,50):i==e-1?t.drawImage(this.spritesheet,100,150,50,50,this.x+50*i,this.y,50,50):t.drawImage(this.spritesheet,50,150,50,50,this.x+50*i,this.y,50,50)},e.prototype.destroy=function(){1==this.direction&&this.x>=700&&(this.isAlive=!1)},e}(t);const f=c;var u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(e,i,n,r,o,s,a,h){var c=t.call(this,e,i,n,r,o)||this;return c.currentAnimation="hedge_blank",c.stateTimer=0,c.frameIndex=0,c.frameTimer=0,c.isAnimating=!1,c.isFly=!1,c.isCaptured=!1,c.actualX=e+30,c.actualY=i+30,c.actualW=c.actualH=74,c.spritesheet=a,c.animations=s,c.isFly=h,c.playAnimation("hedge_blank"),c}return u(e,t),e.prototype.draw=function(t){var e=this.animations[this.currentAnimation];if(e)for(var i=e.frames[this.frameIndex],n=Math.floor(this.w/168),r=0;r<n;r++)t.drawImage(this.spritesheet,i.x,i.y,i.w,i.h,this.x+168*r,this.y,168,100)},e.prototype.playAnimation=function(t){var e=this.animations[t];e&&e.frames&&e.times?(this.currentAnimation=t,this.frameIndex=0,this.frameTimer=e.times[0],this.isAnimating=!0):console.warn('Invalid animation "'.concat(t,'"'))},e.prototype.updateAnimation=function(t){this.isFly&&"hedge_fly"!==this.currentAnimation?this.playAnimation("hedge_fly"):this.isCaptured&&"hedge_captured"!==this.currentAnimation&&this.playAnimation("hedge_captured");var e=this.animations[this.currentAnimation];e&&(this.frameTimer-=t,this.frameTimer<=0&&(this.frameIndex++,this.frameIndex>=e.frames.length&&(e.repeat?this.frameIndex=0:(this.frameIndex=e.frames.length-1,this.isAnimating=!1)),this.frameTimer=e.times[this.frameIndex]))},e}(t);const p=l;var d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(t){function e(e,i,n,r,o){return t.call(this,e,i,n,r,o)||this}return d(e,t),e.prototype.draw=function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.w,this.h)},e}(t);const y=m;var w=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=function(t){function e(e,i,n,r,o){return t.call(this,e,i,n,r,o)||this}return w(e,t),e.prototype.draw=function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.w,this.h)},e}(t);const g=v;var x=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,r,o)||this;return a.spritesheet=s,a}return x(e,t),e.prototype.draw=function(t){t.drawImage(this.spritesheet,0,250,this.w,this.h,this.x,this.y,this.w,this.h)},e}(t);const A=b;var _=new function(){var t=this;this.loadSpritesheet=function(){return new Promise((function(e){var i=new Image;i.src="../src/frogger_spritesheet.png",i.onload=function(){t.spritesheet=i,e()}}))}},I=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))},S=function(t,e){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(h){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}},T=function(){function t(t,e,i){var n=this;this.layout=[],this.hedgeArr=[],this.waterArr=[],this.roadArr=[],this.safeZoneArr=[],this.receiveData=function(t){return I(n,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return[4,fetch("../data/".concat(t,".json"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},this.loadSpritesheet=function(){return I(n,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,_.loadSpritesheet()];case 1:return t.sent(),[2]}}))}))},this.w=t,this.h=e,this.unit=i}return t.prototype.init=function(){return I(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:return[4,this.loadSpritesheet()];case 1:return e.sent(),t=this,[4,this.receiveData("animations")];case 2:return t.animations=e.sent(),this.createBlankMap(this.w,this.h,this.unit),this.fillMap(),[2]}}))}))},t.prototype.createBlankMap=function(t,e,i){t/=i,e/=i;for(var n=0;n<e;n++){for(var r=[],o=0;o<t;o++)r.push(null);this.layout.push(r)}},t.prototype.fillMap=function(){for(var t=0;t<this.layout.length;t++)for(var e=this.layout[t],i=Math.floor(4*Math.random()),n=0;n<e.length;n++){if(0==t&&168*n<700){var r=new p(168*n,t,168,100,"green",this.animations,_.spritesheet,n==i);this.hedgeArr.push(r),e[n]=r}if(7==t||13==t){var o=new A(n*this.unit,t*this.unit,50,50,"purple",_.spritesheet);this.safeZoneArr.push(o),e[n]=o}if(2==t||3==t||4==t||5==t||6==t){var s=new y(n*this.unit,t*this.unit,50,50,"#000047");this.waterArr.push(s),e[n]=s}if(8==t||9==t||10==t||11==t||12==t){var a=new g(n*this.unit,t*this.unit,50,50,"black");this.roadArr.push(a),e[n]=a}}},t.prototype.draw=function(t){for(var e=0;e<this.layout.length;e++)for(var i=this.layout[e],n=0;n<i.length;n++)(i[n]instanceof g||i[n]instanceof y||i[n]instanceof A||i[n]instanceof p)&&i[n].draw(t)},t}(),O=new T(700,700,50),k=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C=function(t){function e(e,i,n,r,o,s,a){var h=t.call(this,e,i,n,r,o)||this;return h.currentAnimation="frog_up",h.frameIndex=0,h.frameTimer=0,h.isAnimating=!1,h.lives=5,h.isDead=!1,h.checkCollisions=!0,h.onHedge=!1,h.inWater=!1,h.onWood=!1,h.onFlower=!1,h.hitByCar=!1,h.passedRows={600:!1,550:!1,500:!1,450:!1,400:!1,300:!1,250:!1,200:!1,150:!1,100:!1},h.capturedFlies=0,h.points=0,h.keyDown=function(t){var e=!1;"ArrowUp"===t.key&&(h.y=Math.max(0,h.y-50),h.playAnimation("frog_up"),e=!0),"ArrowDown"===t.key&&(h.y=Math.min(650,h.y+50),h.playAnimation("frog_down"),e=!0),"ArrowLeft"===t.key&&(h.x=Math.max(0,h.x-50),h.playAnimation("frog_left"),e=!0),"ArrowRight"===t.key&&(h.x=Math.min(650,h.x+50),h.playAnimation("frog_right"),e=!0),e&&(h.isAnimating=!0,h.frameIndex=0,h.frameTimer=h.animations[h.currentAnimation].times[0])},h.configureMovement(),h.animations=s,h.spritesheet=a,h}return k(e,t),e.prototype.configureMovement=function(){window.addEventListener("keydown",this.keyDown)},e.prototype.disableMovement=function(){window.removeEventListener("keydown",this.keyDown)},e.prototype.follow=function(t,e,i){this.x+=e*i*(t/1e3),(this.x<0||this.x>650)&&this.die()},e.prototype.collidesWith=function(t){return!(t instanceof a&&t.isHidden)&&this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.y+this.h>t.y},e.prototype.reachHedge=function(t){if(this.x<t.actualX+t.actualW&&this.x+this.w>t.actualX&&this.y<t.actualY+t.actualH&&this.y+this.h>t.actualY&&t.isFly){for(var e in this.passedRows)this.passedRows[e]=!1;if(this.capturedFlies+=1,this.points+=500,t.isFly=!1,t.isCaptured=!0,4!=this.capturedFlies)for(var i=!1;!i;){var n=Math.floor(4*Math.random());O.hedgeArr[n].isCaptured||(O.hedgeArr[n].isFly=!0,this.x=350,this.y=650,i=!0)}}else this.die()},e.prototype.draw=function(t){var e=this.animations[this.currentAnimation];if(e){var i=e.frames[this.frameIndex];t.drawImage(this.spritesheet,i.x,i.y,i.w,i.h,this.x,this.y,this.w,this.h)}},e.prototype.playAnimation=function(t){var e=this.animations[t];e&&e.frames&&e.times?(this.currentAnimation=t,this.frameIndex=0,this.frameTimer=e.times[0],this.isAnimating=!0):console.warn('Invalid animation "'.concat(t,'"'))},e.prototype.updateAnimation=function(t){if(this.isAnimating){var e=this.animations[this.currentAnimation];if(e&&(this.frameTimer-=t,this.frameTimer<=0)){if(this.frameIndex++,this.frameIndex>=e.frames.length){if(!e.repeat)return this.frameIndex=e.frames.length-1,void(this.isAnimating=!1);this.frameIndex=0}this.frameTimer=e.times[this.frameIndex]}}},e.prototype.playDeathAnimation=function(){var t=this;return new Promise((function(e){t.playAnimation("frog_death"),t.isAnimating=!0,t.frameIndex=0,t.frameTimer=t.animations.frog_death.times[0];var i=t.animations.frog_death.times.reduce((function(t,e){return t+e}),0);setTimeout((function(){t.isAnimating=!1,e()}),i)}))},e.prototype.die=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(h){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}}(this,(function(t){switch(t.label){case 0:return this.isDead=!0,this.checkCollisions=!1,this.disableMovement(),[4,this.playDeathAnimation()];case 1:return t.sent(),this.x=350,this.y=650,this.lives--,this.isDead=!1,this.checkCollisions=!0,this.configureMovement(),this.playAnimation("frog_up"),[2]}}))},new((i=void 0)||(i=Promise))((function(r,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n},e.prototype.updatePoints=function(){this.passedRows[this.y]||null==this.passedRows[this.y]||(this.passedRows[this.y]=!0,this.points+=100,console.log(this.passedRows))},e}(t);const j=C;var D=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))},E=function(t,e){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(h){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}},P=document.getElementById("leftContainer"),M=document.getElementById("middleContainer"),W=document.getElementById("rightContainer"),F=document.getElementById("canvas"),H=F.getContext("2d"),B=(document.getElementById("timer"),document.getElementById("filler")),R=document.getElementById("lifes"),L=R.getContext("2d"),G=document.getElementById("points"),Z=document.getElementById("end"),X=document.getElementById("score"),Y=function(){function t(){var t=this;this.frameRate=1e3/60,this.lastFrame=0,this.gameTime=9e4,this.carSpawnTimer={first:0,second:0,third:0,fourth:0,fifth:0},this.carSpawnIndex={first:0,second:0,third:0,fourth:0,fifth:0},this.cars=[],this.flowersSpawnTimer={first:0,second:0},this.flowersSpawnIndex={first:0,second:0},this.flowers=[],this.woodSpawnTimer={first:0,second:0,third:0,fourth:0,fifth:0},this.woodSpawnIndex={first:0,second:0,third:0,fourth:0,fifth:0},this.woods=[],this.map=O,this.hedge=O.hedgeArr,this.water=O.waterArr,this.road=O.roadArr,this.safeZones=O.safeZoneArr,this.receiveData=function(e){return D(t,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return[4,fetch("../data/".concat(e,".json"))];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))},this.loadSpritesheet=function(){return D(t,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return[4,_.loadSpritesheet()];case 1:return t.sent(),this.spritesheet=_.spritesheet,[2]}}))}))},this.gameLoop=function(e){var i=0;if(void 0===t.startTime)t.startTime=e;else{var n=Math.round((e-t.startTime)/t.frameRate);for(var r in i=(n-t.lastFrame)*t.frameRate,t.lastFrame=n,t.carSpawnTimer)t.carSpawnTimer[r]+=i;for(var r in t.flowersSpawnTimer)t.flowersSpawnTimer[r]+=i;for(var r in t.woodSpawnTimer)t.woodSpawnTimer[r]+=i}t.spawnCars("first",{x:-100,y:600},50,1,100,100),t.spawnCars("second",{x:700,y:550},50,-1,120,0),t.spawnCars("third",{x:-100,y:500},50,1,130,150),t.spawnCars("fourth",{x:700,y:450},50,-1,100,50),t.spawnCars("fifth",{x:700,y:400},100,-1,120,200),t.cars=t.cars.filter((function(t){return t.isAlive})),t.spawnFlowers("first",{x:700,y:300},150,150),t.spawnFlowers("second",{x:700,y:150},100,150),t.flowers=t.flowers.filter((function(t){return t.isAlive})),t.spawnWood("first",{x:-150,y:250},150,150),t.spawnWood("second",{x:-350,y:200},350,170),t.spawnWood("third",{x:-200,y:100},200,150),t.woods=t.woods.filter((function(t){return t.isAlive})),H.clearRect(0,0,F.width,F.height),L.clearRect(0,0,R.width,R.height),t.checkCollisions(i),t.cars.forEach((function(t){t.move(i)})),t.flowers.forEach((function(t){t.move(i)})),t.woods.forEach((function(t){t.move(i)})),t.updateAnimations(i),t.draw(H),t.updateTimer(i),t.updatePoints(),t.updateLives(),(t.gameTime<=0||4==t.frog.capturedFlies||0==t.frog.lives)&&t.endGame(),requestAnimationFrame(t.gameLoop)}}return t.prototype.init=function(){return D(this,void 0,void 0,(function(){var t,e,i,n;return E(this,(function(r){switch(r.label){case 0:return O.init(),t=this,[4,this.receiveData("cars")];case 1:return t.carsData=r.sent(),e=this,[4,this.receiveData("flowers")];case 2:return e.flowersData=r.sent(),i=this,[4,this.receiveData("woods")];case 3:return i.woodsData=r.sent(),n=this,[4,this.receiveData("animations")];case 4:return n.animationsData=r.sent(),[4,this.loadSpritesheet()];case 5:return r.sent(),this.createPlayer(),this.configureCanvas(F,H,700,700),this.configureCanvas(R,L,125,25),requestAnimationFrame(this.gameLoop),[2]}}))}))},t.prototype.configureCanvas=function(t,e,i,n){t.width=i,t.height=n,e.fillStyle="black",e.fillRect(0,0,t.width,t.height)},t.prototype.updateTimer=function(t){this.gameTime-=t,B.style.width="".concat(this.gameTime/9e4*100,"%")},t.prototype.updatePoints=function(){this.frog.updatePoints(),G.innerText="".concat(this.frog.points)},t.prototype.updateLives=function(){for(var t=0;t<this.frog.lives;t++)L.drawImage(this.spritesheet,0,400,25,25,25*t,0,25,25)},t.prototype.createPlayer=function(){this.frog=new j(350,650,50,50,"green",this.animationsData,this.spritesheet)},t.prototype.spawnCars=function(t,e,i,n,o,s){this.carSpawnTimer[t]>=this.carsData[t][this.carSpawnIndex[t]]&&(this.cars.push(new r(e.x,e.y,i,50,"white",n,o,this.spritesheet,s)),this.carSpawnTimer[t]-=this.carsData[t][this.carSpawnIndex[t]],this.carSpawnIndex[t]+=1,5==this.carSpawnIndex[t]&&(this.carSpawnIndex[t]=0))},t.prototype.spawnFlowers=function(t,e,i,n){this.flowersSpawnTimer[t]>=this.flowersData[t][this.flowersSpawnIndex[t]]&&(this.flowers.push(new a(e.x,e.y,i,50,"pink",-1,n,this.animationsData,this.spritesheet)),this.flowersSpawnTimer[t]-=this.flowersData[t][this.flowersSpawnIndex[t]],this.flowersSpawnIndex[t]+=1,4==this.flowersSpawnIndex[t]&&(this.flowersSpawnIndex[t]=0))},t.prototype.spawnWood=function(t,e,i,n){this.woodSpawnTimer[t]>=this.woodsData[t][this.woodSpawnIndex[t]]&&(this.woods.push(new f(e.x,e.y,i,50,"brown",1,n,this.spritesheet)),this.woodSpawnTimer[t]-=this.woodsData[t][this.woodSpawnIndex[t]],this.woodSpawnIndex[t]+=1,3==this.woodSpawnIndex[t]&&(this.woodSpawnIndex[t]=0))},t.prototype.checkCollisions=function(t){var e=this;if(this.frog.checkCollisions){this.frog.onHedge=!1,this.frog.onWood=!1,this.frog.onFlower=!1,this.frog.inWater=!1,this.frog.hitByCar=!1;for(var i=0,n=this.hedge;i<n.length;i++){var r=n[i];if(this.frog.collidesWith(r)){this.frog.onHedge=!0;break}}for(var o=0,s=this.flowers;o<s.length;o++){var a=s[o];if(this.frog.collidesWith(a)){this.frog.onFlower=!0;break}}for(var h=0,c=this.woods;h<c.length;h++){var f=c[h];if(this.frog.collidesWith(f)){this.frog.onWood=!0;break}}for(var u=0,l=this.cars;u<l.length;u++){var p=l[u];if(this.frog.collidesWith(p)){this.frog.hitByCar=!0;break}}for(var d=0,m=this.water;d<m.length;d++){var y=m[d];if(this.frog.collidesWith(y)){this.frog.inWater=!0;break}}if(this.frog.onHedge&&(r=this.hedge.find((function(t){return e.frog.collidesWith(t)})),this.frog.reachHedge(r)),this.frog.isDead||!this.frog.hitByCar&&(!this.frog.inWater||this.frog.onWood||this.frog.onFlower)||this.frog.die(),this.frog.onWood&&(f=this.woods.find((function(t){return e.frog.collidesWith(t)})),this.frog.follow(t,f.direction,f.speed)),this.frog.onFlower){var w=this.flowers.find((function(t){return e.frog.collidesWith(t)}));this.frog.follow(t,w.direction,w.speed)}}},t.prototype.draw=function(t){O.draw(t),this.cars.forEach((function(e){e.draw(t)})),this.flowers.forEach((function(e){e.draw(t)})),this.woods.forEach((function(e){e.draw(t)})),this.frog.draw(t)},t.prototype.updateAnimations=function(t){this.frog.updateAnimation(t),this.flowers.forEach((function(e){e.updateAnimation(t)})),this.hedge.forEach((function(e){e.updateAnimation(t)}))},t.prototype.endGame=function(){this.frog.disableMovement(),P.style.display="none",M.style.display="none",W.style.display="none",Z.style.display="flex",X.innerHTML="".concat(this.frog.points)},t}();(new Y).init()})();